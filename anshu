<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>snake Game</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: "Poppins", sans-serif;
    }
    body {
      background-color: #0e0e0e;
      color: #f5f5f5;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      text-align: center;
    }
    h1 {
      font-weight: 600;
      font-size: 1.8rem;
      margin-bottom: 8px;
      letter-spacing: 1px;
    }
    #score {
      font-size: 1.1rem;
      margin-bottom: 10px;
    }
    canvas {
      background-color: #161616;
      border: 1.5px solid #444;
      border-radius: 10px;
    }
    .controls {
      margin-top: 15px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
    }
    .btn-row {
      display: flex;
      gap: 8px;
    }
    .btn {
      background: #222;
      color: #f5f5f5;
      border: 1px solid #444;
      padding: 10px 18px;
      font-size: 18px;
      border-radius: 8px;
      cursor: pointer;
      transition: 0.2s;
    }
    .btn:active {
      background: #333;
      transform: scale(0.95);
    }
    #restart {
      margin-top: 10px;
      background: #333;
      color: white;
      padding: 10px 25px;
      border-radius: 8px;
      border: 1px solid #555;
      font-weight: 500;
      font-size: 16px;
      cursor: pointer;
      transition: 0.2s;
    }
    #restart:active {
      background: #444;
      transform: scale(0.95);
    }
  </style>
</head>
<body>
  <h1>üêç Emoji Snake</h1>
  <div id="score">Score: 0</div>
  <canvas id="game" width="300" height="300"></canvas>

  <div class="controls">
    <button class="btn" id="up">‚¨Ü</button>
    <div class="btn-row">
      <button class="btn" id="left">‚¨Ö</button>
      <button class="btn" id="right">‚û°</button>
    </div>
    <button class="btn" id="down">‚¨á</button>
  </div>

  <button id="restart">üîÅ Restart</button>

  <audio id="bg-music" src="music.mp3" autoplay loop></audio>
  <audio id="eat-sound" src="eating.mp3"></audio>

  <script>
    const canvas = document.getElementById("game");
    const ctx = canvas.getContext("2d");
    const scoreDisplay = document.getElementById("score");
    const restartBtn = document.getElementById("restart");

    const gridSize = 20;
    const tileCount = canvas.width / gridSize;
    const emojis = ["üçé", "üçí", "üçë", "üçì", "üçä", "ü•ï", "ü•≠", "üçç", "üåΩ", "ü•ë", "ü•ù", "üçè", "üßÄ"];

    const eatSound = document.getElementById("eat-sound");
const bgMusic = document.getElementById("bg-music");
let soundEnabled = false;

// Unlock sound on first touch/click
document.addEventListener("click", () => {
  if (!soundEnabled) {
    bgMusic.play().catch(()=>{});
    eatSound.play().catch(()=>{});
    soundEnabled = true;
  }
});

    let snake, direction, fruits, score, speed, gameLoopInterval;

    function initGame() {
      snake = [{ x: 10, y: 10 }];
      direction = { x: 1, y: 0 };
      fruits = [randomFruit(), randomFruit()];
      score = 0;
      speed = 150;
      scoreDisplay.textContent = "Score: " + score;
      if (gameLoopInterval) clearInterval(gameLoopInterval);
      gameLoopInterval = setInterval(gameLoop, speed);
    }

    function randomFruit() {
      return {
        x: Math.floor(Math.random() * tileCount),
        y: Math.floor(Math.random() * tileCount),
        emoji: emojis[Math.floor(Math.random() * emojis.length)],
      };
    }

    function drawEmoji(text, x, y) {
      ctx.font = "20px serif";
      ctx.fillText(text, x * gridSize, (y + 1) * gridSize - 4);
    }

    function gameLoop() {
      update();
      draw();
    }

    function update() {
      const head = {
        x: snake[0].x + direction.x,
        y: snake[0].y + direction.y,
      };

      // Bounce logic
      if (head.x < 0 || head.x >= tileCount) direction.x *= -1;
      if (head.y < 0 || head.y >= tileCount) direction.y *= -1;

      head.x = Math.max(0, Math.min(tileCount - 1, head.x));
      head.y = Math.max(0, Math.min(tileCount - 1, head.y));

      snake.unshift(head);

      let ate = false;
      fruits.forEach((fruit, index) => {
        if (head.x === fruit.x && head.y === fruit.y) {
          fruits[index] = randomFruit();
          score++;
          scoreDisplay.textContent = "Score: " + score;
          eatSound.currentTime = 0;
          eatSound.play();
          ate = true;
        }
      });
      if (!ate) snake.pop();
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      snake.forEach((part) => drawEmoji("üêç", part.x, part.y));
      fruits.forEach((fruit) => drawEmoji(fruit.emoji, fruit.x, fruit.y));
    }

    function changeDirection(x, y) {
      direction = { x, y };
    }

    document.getElementById("up").addEventListener("click", () => changeDirection(0, -1));
    document.getElementById("down").addEventListener("click", () => changeDirection(0, 1));
    document.getElementById("left").addEventListener("click", () => changeDirection(-1, 0));
    document.getElementById("right").addEventListener("click", () => changeDirection(1, 0));

    restartBtn.addEventListener("click", initGame);

    bgMusic.volume = 0.5;
    bgMusic.play();

    initGame();
  </script>
</body>
</html>
